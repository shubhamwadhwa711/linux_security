### Create virtual environment python 3.9
```
virtualenv .venv --python=python3.9
```

### Activate virtual environment
```
source .venv/bin/activate
```

### Install packages
```
pip install -r requirements.txt
```

### Update the config for scripts
Please make sure that you have changed the configs inside `config.ini` depending on your machine before execute the scripts
- `[mysql]` section for database
- `script-01` section for introtext and fulltext script [Gecodriver `geckodriver-v0.32.0-linux64` is added with the current build which is compatible with `Mozilla Firefox 120.0` you can change this based on your system configuration and firefox version and define the path in `config.ini`]
- `config.inin > gecodriver_required` is set to `False` by default so it will not invoke gecodriver and use system defaults, but if there is need for gecodriver chnage the value to `True` and execute the scipts, ideally it should work with value as `False`
- `script-02` section for URLs script

### Run multi-thread-intro-fulltext.py for introtext and fulltext fields with multiple processes
- If you would like to run the script without saving database. Use this command:
```
python multi-thread-intro-fulltext.py
```
- Use this command if you want to check for specific ID
```
python multi-thread-intro-fulltext.py --id 113785
```
- Use this command if you want to commit the changes into database.
```
python multi-thread-intro-fulltext.py --commit
```

### Run 01-introtext-fulltext-script.py for introtext and fulltext fields
- If you would like to run the script without saving database. Use this command:
```
python 01-introtext-fulltext-script.py
```
- Use this command if you want to check for specific ID
```
python 01-introtext-fulltext-script.py --id 113785
```
- Use this command if you want to commit the changes into database. This will generate `store_state_file` file that is defined in `config.ini > [script-01]` to store the processing state.
```
python 01-introtext-fulltext-script.py --commit
```

### Run 02-urls-script.py for URLs field
- If you would like to run the script without saving database. Use this command:
```
python 02-urls-script.py
```
- Check for specific ID
```
python 02-urls-script.py --id 113785
```
- Use this command if you want to commit the changes into database. This will generate `store_state_file` file that is defined in `config.ini > [script-02]` to store the processing state.
```
python 02-urls-script.py --commit
```

### Run 03-timeout-script.py for more checking
After executed 2 scripts above, these files (01.timeout-urls.json, 02.timeout-urls.json) will be generated automatically for Timeout error. In case we need to recheck these URLs to make sure those still working. Please run command below

- Without commit database
```
python 03-timeout-script.py --file 01.timeout-urls.json --timeout 10 (For checking URLs that are generated by script 01)
python 03-timeout-script.py --file 02.timeout-urls.json --urla --timeout 10 (For checking URLs that are generated by script 02)
```

- With commit database
```
python 03-timeout-script.py --file 01.timeout-urls.json --timeout 10 --commit (For checking URLs that are generated by script 01)
python 03-timeout-script.py --file 02.timeout-urls.json --urla --timeout 10 --commit (For checking URLs that are generated by script 02)
```


### ChangeLog till 24 January 2024

- Gecodriver added with files with version `geckodriver-v0.32.0-linux64.tar` compatible with mozila firefox version `Mozilla Firefox 120.0`
- Added Support to replace redirect URL in the intortext and fulltext, also generates a separate json log as well for the same and you can chnage the name for the log file in `config.ini`
- updated logging format in `multi-thread-intro-fulltext.py` from text to json for more readability
- Refactoring code to atain independent functions so that we can add new dedicated functions in future as well as per the request
- Added support in `DECOMPOSE_URLS` to remove urls which contain specific string in the URL, so now you can pass either full `base_url` or just pass the substring if the URL contains the substring as well it will be removed without making any get requests.
- Added support for dry run in `03-timeout-script`, Earlier when you make a dry run i.e withouyt `--commit` flag it was clearing the JSon file generated from `script 01` but now this has been updated it will not affect the JSON file generated by `01-introtext-fulltext-script.py` or `multi-thread-intro-fulltext.py`.
- Added commandline flag `-q` in `multi-thread-intro-fulltext.py` to hide the logging on console.